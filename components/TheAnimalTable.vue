<script lang="ts" setup>
import type { Animal } from '~/types'
import { computed } from 'vue'

const props = defineProps<{
  animals: Animal[]
}>()

const animalsSortedByName = computed(() =>
  props.animals.slice().sort((animalA, animalB) => {
    const nameA = animalA.name.toUpperCase()
    const nameB = animalB.name.toUpperCase()
    if (nameA < nameB) {
      return -1
    }
    if (nameA > nameB) {
      return 1
    }

    return 0
  }),
)
</script>

<template>
  <table>
    <thead>
      <tr>
        <th>Index</th>
        <th>Species</th>
        <th>Name</th>
        <th>Gender</th>
        <th>Age (yrs)</th>
        <th>Weight (kg)</th>
      </tr>
    </thead>
    <tbody>
      <tr v-for="({ species, gender, birthdate, weight, name }, animalIndex) in animalsSortedByName" :key="animalIndex">
        <td>{{ animalIndex + 1 }}</td>
        <td>{{ species }}</td>
        <td>{{ name }}</td>
        <td>{{ gender }}</td>
        <td>{{ calculateAgeInYears(new Date(birthdate)) }}</td>
        <td>{{ weight }}</td>
      </tr>
    </tbody>
  </table>
</template>

<style scoped>
table {
  @apply table-auto w-full text-left
}

td {
  @apply w-40
}

tr {
  @apply border-b-2
}

tbody tr {
  @apply hover:bg-gray-200
}
</style>
